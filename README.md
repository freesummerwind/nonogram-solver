# Семестровое домашнее задание по АИСД
## Тема: Программа для решения японских кроссвордов (нонограмм)
Выполнила: Бояркина Елизавета, студент группы ИУ8-51

## Теоретическая часть
Японский кроссворд - головоломка, в которой с помощью цифр зашифровано некоторое изображение. Целью головоломки является 
полное восстановление этого изображения.

Японские кроссворды бывают двух видов - черно-белые и цветные. В черно-белых кроссвордах изображение содержит только 
два цвета - черный (которым картинка и заполняется) и белый (фоновый). В цветных кроссвордах изображение создается 
несколькими цветами на белом фоне.

Числа, указанные слева и сверху у кроссворда - описывают группы закрашенных клеток (идущих подряд, без пропусков) по 
горизонтали и вертикали соответственно. Порядок этих чисел описывает порядок расположения этих групп, но где 
каждая группа начинается и заканчивается - не известно (таким образом, определить их положение и является задачей 
головоломки). Каждое число обозначает отдельную группу заданного размера (т.е. число 3 - обозначает группу из 
трех закрашенных подряд клеток, 1 - группу из одной единственной закрашенной клетки). В черно-белых кроссвордах клетка 
всегда закрашивается черным цветом, в цветных - клетка закрашивается тем цветом, которым помечено число. Между 
группами одного цвета должна быть как минимум одна не закрашенная клетка, между группами разных цветов пустых клеток 
может не быть.

Главным требованием к японским кроссвордам является то, что кроссворд должен иметь единственное логическое решение, 
достижимое без "угадываний" (метода проб и ошибок).

Пример черно-белого кроссворда:

![alt text](pictures/black_and_white.png "Пример черно-белого кроссворда")

Пример цветного кроссворда:

![alt text](pictures/colored.png "Пример цветного кроссворда")

## Формальная постановка задачи
Написать программу, которая будет правильно решать поданную ей на вход корректно составленную нонограмму. В случае, если 
поданная на вход нонограмма не может быть решена, программа должна выдавать сообщение об этом и подавать на выход 
частично решенную нонограмму. При некорректном вводе должно выводиться сообщение об ошибке.

## Форматы входных и выходных данных
На вход программе первым аргументом командной строки подается адрес файла формата YAML, содержащего описание нонограммы.
Файл должен содержать в себе следующие поля: size, colored, lines, columns. Поле size содержит в себе массив из двух
значений - количества строк и столбцов, соответственно. Поле colored имеет значение true или false - в зависимости от
того, является ли представленная нонограмма цветной или черно-белой. Поле lines содержит в себе последовательность 
массивов. Каждый массив содержит в себе описание соответствующей строки: первый массив описывает первую строку, 
второй - вторую и т.д. Количество массивов должно быть равно количеству строк, указанному в параметре size ранее. Для
черно-белой нонограммы массив содержит в себе последовательность цифр - длин групп из закрашенных подряд клеток; 
для цветной - последовательность массивов вида ['r', 5], где 'r' - цвет группы, 5 - ее длина. Поле columns заполняется 
аналогично полю size, только для столбцов. Также для цветной нонограммы обязательно наличие поля colors, в котором при 
помощи словаря заданы обозначения цветов их HEX-значения.
  
Пример корректного входного файла для цветной нонограммы:

```
size: [5, 4]
colored: true
colors:
 - r: 0xff0000
 - b: 0x0000ff
lines:
 - [['b', 2], ['r', 1], ['b', 1]]
 - [['b', 1], ['r', 1]]
 - []
 - [['b', 2]]
 - [['r', 3], ['b', 1]]
columns:
 - [['b', 2], ['r', 1]]
 - [['b', 1], ['b', 1], ['r', 1]]
 - [['r', 2], ['b', 1], ['r', 1]]
 - [['b', 1], ['b', 1]]
```

Программа выводит картинку с решенным кроссвордом либо сообщение об ошибке. Если картинку с решением нужно сохранить, 
то программе на вход нужно подать путь к файлу, в котором нужно сохранить картинку, аргументом -s командной строки. 
Пример корректного ввода:

```
./nonogram-solver input.yml
./nonogram-solver input.yml -s output.png
```

## План решения
Язык реализации - C++

Идея алгоритма: поочередно проходим строки и столбцы и заполняем матрицу решения в соответствии с имеющейся информацией.
При заполнении какой-либо клетки - добавляем строку и столбец, на пересечении которых она лежит, в очередь. Алгоритм 
завершается, когда заканчивается очередь строк и столбцов, которые нужно проверить. Если при этом заполнена не вся 
матрица решения, то это значит, что нонограмма составлена некорректно и решить ее без метода проб и ошибок невозможно.

Примерная структура программы:
- функция-обработчик входного YAML-файла;
- функция, заполняющая строку (столбец) в соответствии с имеющейся информацией;
- функция, непосредственно решающая нонограмму. Она вызывает функцию заполнения поочередно для строк и столбцов и 
  обновляет очередь из строк и столбцов, пока не будет заполнена вся матрица решений (или пока можно будет получить 
  новую информацию о решении);
- функция, представляющая полученное решение в виде картинки.